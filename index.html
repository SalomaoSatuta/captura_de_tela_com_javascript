<!DOCTYPE html>
<html lang="pt-pt">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Captura de tela com javascript</title>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.5/dist/html2canvas.min.js"></script>

    <style>
      #photo {
        border: 4px solid green;
        padding: 4px;
      }
    </style>
  </head>

  <body>
    <body>
      <div id="photo">
        <h1>GeeksforGeeks</h1>
        Hello everyone! This is a trial page for taking a screenshot.
        <br /><br />
        This is a dummy button!
        <button>Dummy</button>
        <br /><br />
        Click the button below to take a screenshot of the div.
        <br /><br />
      </div>

      <h1>Screenshot:</h1>

      <img id="imgTT" style="width: 500px; height: 100px" />
      <div id="output"></div>
    </body>

    <script type="text/javascript">
      /*
      function getBase64Image(img) {
        var canvas = document.createElement("canvas");
        canvas.width = img.width;
        canvas.height = img.height;
        var ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0);
        var dataURL = canvas.toDataURL("image/png");
        return dataURL.replace(/^data:image\/(png|jpg);base64,/, "");
      }
      // Define the function
      // to screenshot the div
      function takeshot() {
        let div = document.getElementById("photo");

        // Use the html2canvas
        // function to take a screenshot
        // and append it
        // to the output div
        html2canvas(div).then(function (canvas) {
          document.getElementById("output").appendChild(canvas);
          var data = canvas.toDataURL();

          console.log(data);
          return;
          canvas.toBlob(function (blob) {
            console.log(blob);

            var newImg = document.createElement("img");
            var url = URL.createObjectURL(blob);
            var base64 = getBase64Image(url);

            console.log("base64", base64);

            /*
            newImg.onload = function () {
              // no longer need to read the blob so it's revoked
              URL.revokeObjectURL(url);
            };

            newImg.src = url;
            document.body.appendChild(newImg);  
          });
        });
      }

      takeshot();
      */
    </script>

    <script src="./app.js"></script>
  </body>
</html>
